!function(e,t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};return"object"===("undefined"==typeof exports?"undefined":n(exports))?module.exports=t():"function"==typeof define&&define.amd?define(function(){return t()}):e.datepicker=t()}(this,function(){"use strict";function e(e,o){var i="string"==typeof e?document.querySelector(e):e,a=i.parentElement;o=t(o||n(),i,e);var s=document.createElement("div"),d=o,l=d.startDate,h=d.dateSelected,f=i===document.body||i===document.querySelector("html"),b={el:i,parent:a,nonInput:"INPUT"!==i.nodeName,noPosition:f,position:!f&&o.position,startDate:l,dateSelected:h,minDate:o.minDate,maxDate:o.maxDate,noWeekends:!!o.noWeekends,calendar:s,currentMonth:(l||h).getMonth(),currentMonthName:w[(l||h).getMonth()],currentYear:(l||h).getFullYear(),setDate:u,remove:p,onSelect:o.onSelect,onShow:o.onShow,onHide:o.onHide,onMonthChange:o.onMonthChange,formatter:o.formatter,disableMobile:o.disableMobile,isMobile:"ontouchstart"in window};return h&&c(i,b),s.classList.add("datepicker"),s.classList.add("hidden"),y.push(i),r(l||h,b),v(s,b),window.addEventListener("click",m.bind(b)),window.addEventListener("focusin",m.bind(b)),window.addEventListener("keyup",m.bind(b)),"static"===getComputedStyle(a).position&&(a.style.position="relative"),a.appendChild(s),b}function t(e,t){if(!t)throw new Error("An invalid selector or non-DOM node has been provided.");if(y.includes(t))throw new Error("A datepicker already exists on that element.");var n=e.position,r=e.maxDate,i=e.minDate,a=e.dateSelected,s=e.formatter;if(n){var c=["tr","tl","br","bl"].some(function(e){return n===e}),d='"options.position" needs to be one of the following: tl, tr, bl, or br.';if(!c)throw new Error(d);e.position=o(n)}else e.position=o("bl");if(["startDate","dateSelected","minDate","maxDate"].forEach(function(t){if(e[t]){if(!h(e[t])||isNaN(+e[t]))throw new TypeError('"options.'+t+'" needs to be a valid JavaScript Date object.');e[t]=f(e[t])}}),e.startDate=e.startDate||e.dateSelected||f(new Date),e.formatter="function"==typeof s?s:null,r<i)throw new Error('"maxDate" in options is less than "minDate".');if(a){if(i>a)throw new Error('"dateSelected" in options is less than "minDate".');if(r<a)throw new Error('"dateSelected" in options is greater than "maxDate".')}return["onSelect","onShow","onHide","onMonthChange"].forEach(function(t){e[t]="function"==typeof e[t]&&e[t]}),e}function n(){return{startDate:f(new Date),position:"bl"}}function o(e){var t={};return t[g[e[0]]]=1,t[g[e[1]]]=1,t}function r(e,t){var n=i(e,t),o=a(e,t);t.calendar.innerHTML=n+o}function i(e){return['<div class="controls">','<div class="arrow left"></div>','<div class="month-year">','<span class="month">'+w[e.getMonth()]+"</span>",'<span class="year">'+e.getFullYear()+"</span>","</div>",'<div class="arrow right"></div>',"</div>"].join("")}function a(e,t){var n=t.minDate,o=t.maxDate,r=t.dateSelected,i=t.currentYear,a=t.currentMonth,s=t.noWeekends,c=new Date,d=c.toJSON().slice(0,7)===e.toJSON().slice(0,7),l=new Date(new Date(e).setDate(1)),u=l.getDay();l.setMonth(l.getMonth()+1),l.setDate(0);var h=l.getDate(),f=[],p=7*((u+h)/7|0);p+=(u+h)%7?7:0;for(var v=1;v<=p;v++){var m=b[v%7],w=v-u,g="",y='<span class="num">'+w+"</span>",S=new Date(i,a,w),D=w<1||w>h;if(D)g="empty",y="";else{var M=n&&S<n||o&&S>o,E="Sat"===m||"Sun"===m,x=d&&!M&&w===c.getDate();M=M||s&&E,g=M?"disabled":x?"current":""}+S!==+r||D||(g+=" active"),f.push('<div class="square num '+m+" "+g+'">'+y+"</div>")}var L=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(function(e){return'<div class="square day">'+e+"</div>"}).concat(f);if(L.length%7!==0){var N="Calendar not constructed properly. The # of squares should be a multiple of 7.";throw new Error(N)}return L.unshift('<div class="squares">'),L.push("</div>"),L.join("")}function s(e,t){var n=t.currentMonth,o=t.currentYear,r=t.calendar,i=t.el,a=t.onSelect,s=r.querySelector(".active"),d=e.textContent;t.dateSelected=new Date(o,n,d),s&&s.classList.remove("active"),e.classList.add("active"),c(i,t),r.classList.add("hidden"),a&&t.onSelect(t)}function c(e,t){if(!t.nonInput)return t.formatter?t.formatter(e,t.dateSelected):void(e.value=t.dateSelected.toDateString())}function d(e,t){t.currentMonth+=e.contains("right")?1:-1,12===t.currentMonth?(t.currentMonth=0,t.currentYear++):t.currentMonth===-1&&(t.currentMonth=11,t.currentYear--);var n=new Date(t.currentYear,t.currentMonth,1);r(n,t),t.currentMonthName=w[t.currentMonth],t.onMonthChange&&t.onMonthChange(t)}function l(e){if(!e.noPosition){var t=e.el,n=e.calendar,o=e.position,r=e.parent,i=o.top,a=o.right,s=r.getBoundingClientRect(),c=t.getBoundingClientRect(),d=n.getBoundingClientRect(),l=c.top-s.top+r.scrollTop,u="\n      top:"+(l-(i?d.height:c.height*-1))+"px;\n      left:"+(c.left-s.left+(a?c.width-d.width:0))+"px;\n    ";n.setAttribute("style",u)}}function u(e){if(!h(e))throw new TypeError("`setDate` needs a JavaScript Date object.");e=f(e),this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth(),this.currentMonthName=w[e.getMonth()],this.dateSelected=e,c(this.el,this),r(e,this)}function h(e){return"[object Date]"==={}.toString.call(e)}function f(e){return new Date(e.toDateString())}function p(){window.removeEventListener("click",m),window.removeEventListener("focusin",m),window.removeEventListener("keyup",m),this.calendar.remove(),this.observer.disconnect(),this.calendar.hasOwnProperty("parentStyle")&&(this.parent.style.position="");var e=y.indexOf(this.el);e>-1&&y.splice(e,1)}function v(e,t){t.observer=new MutationObserver(function(e,n){e[0].oldValue.includes("hidden")?(l(t),t.onShow&&t.onShow(t)):t.onHide&&t.onHide(t)}),t.observer.observe(e,{attributes:1,attributeFilter:["class"],attributeOldValue:1})}function m(e){function t(e,t){var n=e.target.classList;n.contains("num")?!function(){var n="SPAN"===e.target.nodeName?e.target.parentNode:e.target,o=["disabled","active","empty"].some(function(e){return n.classList.contains(e)});!o&&s(n,t)}():n.contains("arrow")&&d(n,t)}if(!e.path){var n=e.target;for(e.path=[];n!==document;)e.path.push(n),n=n.parentNode}if(!this.isMobile||!this.disableMobile){var o=this.calendar.classList,r=o.contains("hidden");if("keyup"!==e.type||9===e.keyCode)return"focusin"===e.type?e.target===this.el&&o.remove("hidden"):void(this.noPosition?e.path.includes(this.calendar)?t(e,this):o.toggle("hidden"):r?e.target===this.el&&o.remove("hidden"):e.path.includes(this.calendar)?t(e,this):e.target!==this.el&&o.add("hidden"))}}var w={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},b={1:"Sun",2:"Mon",3:"Tue",4:"Wed",5:"Thu",6:"Fri",0:"Sat"},g={t:"top",r:"right",b:"bottom",l:"left"},y=[];return e});